

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Access Rights &mdash; Tryton Test 0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="User Errors and Warnings" href="user_errors_warnings.html" />
    <link rel="prev" title="PYSON" href="pyson.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Tryton Test
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../client-desktop/index-client-desktop.html">Tryton Desktop Client</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../web-client/index-web-client.html">Tryton Web Client</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index-server.html">Tryton Server</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index-server.html#first-steps">First steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index-server.html#the-model-layer">The model layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index-server.html#the-view-layer">The view layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index-server.html#the-development-process">The development process</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index-server.html#contents">Contents</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="index-topics.html">Using trytond</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="install.html">How to install Tryton</a></li>
<li class="toctree-l4"><a class="reference internal" href="configuration.html">Configuration file for Tryton</a></li>
<li class="toctree-l4"><a class="reference internal" href="setup_database.html">How to setup a database</a></li>
<li class="toctree-l4"><a class="reference internal" href="logs.html">Logging configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="start_server.html">How to start the server</a></li>
<li class="toctree-l4"><a class="reference internal" href="models/index-topics-models.html">Models</a></li>
<li class="toctree-l4"><a class="reference internal" href="backend_types.html">Backend Types supported</a></li>
<li class="toctree-l4"><a class="reference internal" href="models/fields_default_value.html">Default value of fields</a></li>
<li class="toctree-l4"><a class="reference internal" href="models/fields_on_change.html">on_change of fields</a></li>
<li class="toctree-l4"><a class="reference internal" href="domain.html">Domain</a></li>
<li class="toctree-l4"><a class="reference internal" href="pyson.html">PYSON</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Access Rights</a></li>
<li class="toctree-l4"><a class="reference internal" href="user_errors_warnings.html">User Errors and Warnings</a></li>
<li class="toctree-l4"><a class="reference internal" href="triggers.html">Triggers</a></li>
<li class="toctree-l4"><a class="reference internal" href="actions.html">Actions</a></li>
<li class="toctree-l4"><a class="reference internal" href="views/index-topics-views.html">Views</a></li>
<li class="toctree-l4"><a class="reference internal" href="views/extension.html">Extending View</a></li>
<li class="toctree-l4"><a class="reference internal" href="wizard.html">Wizard</a></li>
<li class="toctree-l4"><a class="reference internal" href="reports/index-topics-reports.html">Reports</a></li>
<li class="toctree-l4"><a class="reference internal" href="rpc.html">Remote Procedure Call</a></li>
<li class="toctree-l4"><a class="reference internal" href="task_queue.html">Task Queue</a></li>
<li class="toctree-l4"><a class="reference internal" href="cron.html">Scheduled Actions</a></li>
<li class="toctree-l4"><a class="reference internal" href="user_application.html">User Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="bus.html">Sending notifications</a></li>
<li class="toctree-l4"><a class="reference internal" href="modules/index-topics-modules.html">Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="translation.html">Translation</a></li>
<li class="toctree-l4"><a class="reference internal" href="testing.html">Testing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ref/ref-index.html">API Reference</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index-server.html#indices-glossary-and-tables">Indices, glossary and tables</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../client-library/index-client-library.html">Tryton Scripting Client</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../modules/index-modules.html">App Modules</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Tryton Test</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index-server.html">Tryton Server</a> &raquo;</li>
        
          <li><a href="index-topics.html">Using trytond</a> &raquo;</li>
        
      <li>Access Rights</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/server/topics/access_rights.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="access-rights">
<span id="topics-access-rights"></span><h1>Access Rights<a class="headerlink" href="#access-rights" title="Permalink to this headline">¶</a></h1>
<p>There are 5 levels of access rights: <a class="reference internal" href="#model">Model</a> , <a class="reference internal" href="#actions">Actions</a>, <a class="reference internal" href="#field">Field</a>, <a class="reference internal" href="#button">Button</a>
and <a class="reference internal" href="#record-rule">Record Rule</a>. They are based on the user’s group membership.
If any of those levels are violated, an error is raised.</p>
<p>The access rights are checked if the <a class="reference internal" href="../ref/transaction.html#trytond.transaction.Transaction.context" title="trytond.transaction.Transaction.context"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Transaction.context</span></code></a> has the key <code class="docutils literal notranslate"><span class="pre">_check_access</span></code> set to
<code class="docutils literal notranslate"><span class="pre">True</span></code> (set by default by <a class="reference internal" href="../ref/rpc.html#trytond.rpc.RPC.check_access" title="trytond.rpc.RPC.check_access"><code class="xref py py-attr docutils literal notranslate"><span class="pre">RPC.check_access</span></code></a>) and if the
<a class="reference internal" href="../ref/transaction.html#trytond.transaction.Transaction.user" title="trytond.transaction.Transaction.user"><code class="xref py py-attr docutils literal notranslate"><span class="pre">user</span></code></a> is not <cite>root</cite>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The record rules are always enforced regardless of the <cite>_check_access</cite>
value.</p>
</div>
<div class="section" id="model">
<h2>Model<a class="headerlink" href="#model" title="Permalink to this headline">¶</a></h2>
<p>They are defined by records of <code class="docutils literal notranslate"><span class="pre">ir.model.access</span></code> which define for each couple
of model and group, the <code class="docutils literal notranslate"><span class="pre">read</span></code>, <code class="docutils literal notranslate"><span class="pre">write</span></code>, <code class="docutils literal notranslate"><span class="pre">create</span></code> and <code class="docutils literal notranslate"><span class="pre">delete</span></code>
permission. The permissions are related to the
<a class="reference internal" href="../ref/models/models.html#trytond.model.ModelStorage" title="trytond.model.ModelStorage"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelStorage</span></code></a> methods with the same name and on
<a class="reference internal" href="../ref/models/models.html#trytond.model.ModelStorage.search" title="trytond.model.ModelStorage.search"><code class="xref py py-meth docutils literal notranslate"><span class="pre">search()</span></code></a> using the <code class="docutils literal notranslate"><span class="pre">read</span></code> permission.</p>
<p>If any group the user belongs to has the checked permission activated, then the
user is granted this permission.</p>
<p>If there is no record for the model, then access is granted to all users.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Relation fields for which the user has no read access are automatically
removed from the <a class="reference internal" href="views/index-topics-views.html#topics-views"><span class="std std-ref">views</span></a>.</p>
</div>
</div>
<div class="section" id="actions">
<h2>Actions<a class="headerlink" href="#actions" title="Permalink to this headline">¶</a></h2>
<p>Each <code class="docutils literal notranslate"><span class="pre">ir.action</span></code> has a <code class="docutils literal notranslate"><span class="pre">groups</span></code> field which contains a list of user groups
that are allowed to see and launch it.</p>
<p>There is a special case for <a class="reference internal" href="wizard.html#topics-wizard"><span class="std std-ref">wizard</span></a> for which the read
access on the model is also checked and also the write access if there is no
groups linked.</p>
</div>
<div class="section" id="field">
<h2>Field<a class="headerlink" href="#field" title="Permalink to this headline">¶</a></h2>
<p>They are defined by records of <code class="docutils literal notranslate"><span class="pre">ir.model.field.access</span></code> and work like those
for <a class="reference internal" href="#model">Model</a> but are applied to <a class="reference internal" href="../ref/models/fields.html#ref-models-fields"><span class="std std-ref">fields</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Fields for which the user has no read access are automatically removed from
the <a class="reference internal" href="views/index-topics-views.html#topics-views"><span class="std std-ref">views</span></a>.</p>
</div>
</div>
<div class="section" id="button">
<h2>Button<a class="headerlink" href="#button" title="Permalink to this headline">¶</a></h2>
<p>For each button of a model the records of <cite>ir.model.button</cite> define the list of
groups that are allowed to call it. The user only needs to belong to one of the
groups to be granted the permission to use it.</p>
<p>If no group is defined for a button, the <code class="docutils literal notranslate"><span class="pre">write</span></code> permission to the model is
checked instead.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">read</span></code> permission to the model is always enforced.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Buttons for which the user has no access are marked readonly.</p>
</div>
<div class="section" id="button-rule">
<h3>Button Rule<a class="headerlink" href="#button-rule" title="Permalink to this headline">¶</a></h3>
<p>The <cite>ir.model.button</cite> can contain a list of rules which define how many
different users must click on the button.  Each rule, for which the condition
is met, must be passed to actually trigger the action. The counter can be reset
when another defined button is clicked.</p>
</div>
</div>
<div class="section" id="record-rule">
<h2>Record Rule<a class="headerlink" href="#record-rule" title="Permalink to this headline">¶</a></h2>
<p>The record rules are conditions that records must meet for the user to be
granted permission to use them.
They are defined by records of <cite>ir.rule.group</cite> which contains:</p>
<blockquote>
<div><ul class="simple">
<li>a model on which it applies</li>
<li>the permissions granted</li>
<li>a set of user groups to which the rule applies</li>
<li>a global flag to always enforce</li>
<li>a default flag to add to all users</li>
<li>a list of <cite>ir.rule</cite> with a <a class="reference internal" href="domain.html#topics-domain"><span class="std std-ref">domain</span></a> to select the
records to which the rule applies.</li>
</ul>
</div></blockquote>
<p>A rule group matches a record if the record is validated by at least one of the
domains.
The access is granted to a record:</p>
<blockquote>
<div><ul class="simple">
<li>if the user belongs to a group which has at least one matching rule group
that has the permission,</li>
<li>or if there is a default matching rule group with the permission,</li>
<li>or if there is a global matching rule group with the permission.</li>
</ul>
</div></blockquote>
<p>Otherwise the access is denied if there is any matching rule group.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Records for which the user has no <code class="docutils literal notranslate"><span class="pre">read</span></code> access are filtered out from the
<a class="reference internal" href="../ref/models/models.html#trytond.model.ModelStorage.search" title="trytond.model.ModelStorage.search"><code class="xref py py-meth docutils literal notranslate"><span class="pre">search()</span></code></a> result.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="user_errors_warnings.html" class="btn btn-neutral float-right" title="User Errors and Warnings" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="pyson.html" class="btn btn-neutral float-left" title="PYSON" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Ume Abraham Kalu (Test Documentation)

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>